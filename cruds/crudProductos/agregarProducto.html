<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <title>Hello, world!</title>
  </head>
  <body class="bg-primary">
      <h1 class="text-white text-center m-5">Agregar Producto</h1>
      <div class="container table-responsive pt-4 pb-4 bg-light">   
         <a href="../../productos.html"> <input type="button" value="List Products" class="btn btn-primary mb-3"></a>
          <input type="button" value="Enviar" class="btn btn-success mb-3" id="btnAñadirProducto">

          <table id="userList" class="table table-bordered table-hover table-striped">
              <thead class="thead-light">
                    <tr>
                        <th scope="col">Nombre</th>
                        <th scope="col">Marca</th>
                        <th scope="col">Categoria</th>
                        <th scope="col">Precio</th>
                        <th scope="col">Calidad</th>
                        <th scope="col">Descripción</th>
                        <th scope="col">Stock</th>
                        <th scope="col">Foto</th>
                    </tr>

    </thead>
                    <tr>
                        <th scope="col"><input type="text" id="inputNombre"></th>
                        <th scope="col"><input type="text" id="inputMarca"></th>
                        <th scope="col"><input type="text" id ="inputCategoria"></th>
                        <th scope="col"><input type="number" id="inputPrecio"></th>
                        <th scope="col"><input type="text" placeholder="number"id="inputCalidad"></th>
                        <th scope="col"><input type="text" id="inputDescripcion"></th>
                        <th scope="col"><input type="text" placeholder="true/false"id="inputStock"></th>
                        <th scope="col"><input type="text" id="inputFoto"></th>
                    </tr>
   
    </table>
    
</div>    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script>
const url = "http://144.22.56.156:8080/"
const inputNombre = document.getElementById("inputNombre")
const inputMarca = document.getElementById("inputMarca")
const inputCategoria = document.getElementById("inputCategoria")
const inputPrecio = document.getElementById("inputPrecio")
const inputCalidad = document.getElementById("inputCalidad")
const inputDescripcion = document.getElementById("inputDescripcion")
const inputStock = document.getElementById("inputStock")
const inputFoto = document.getElementById("inputFoto")
const btnAñadirProducto = document.getElementById("btnAñadirProducto")

function funSendDates(){
    let data = {
        reference: inputNombre.value,
        brand: inputMarca.value,
        category: inputCategoria.value,
        description:  inputDescripcion.value,
        price: parseInt(inputPrecio.value),
        availability:inputStock.value,
        quantity: parseInt(inputCalidad.value),
        photography: inputFoto.value
    }
     $.ajax({
        method:"POST",
        url:url + "api/peripherals/new" ,
       
        contentType: "application/json; charset=utf-8",
        dataType: 'JSON',
        data: JSON.stringify(data)
    }).done(function(){
        console.log("fue relizado")
    alert("DATOS ENVIADOS")

    })
    .fail(function(){
        console.log("fallo en el ajax")
    })
    
}
btnAñadirProducto.addEventListener("click",function(){
    if(inputNombre != "" || inputMarca != "" || inputCategoria != "" || inputPrecio != "" ||
        inputCalidad != "" || inputDescripcion != "" || inputStock != "" || inputFoto != "" ||
        btnAñadirProducto != ""){
            funSendDates()
        }else{
            alert("rellene los datos faltantes porfavor")
        }
    console.log(inputNombre.value)

})
    
    </script>
</body>
</html>