<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <title>Hello, world!</title>
  </head>
  <body class="bg-primary">
      <h1 class="text-white text-center m-5">Agregar Usuario</h1>
      <div class="container table-responsive pt-4 pb-4 bg-light">   
         <a href="../../users.html"> <input type="button" value="List Users" class="btn btn-primary mb-3"></a>
          <input type="button" value="Enviar" class="btn btn-success mb-3" id="btnAñadirUser">

          <table id="userList" class="table table-bordered table-hover table-striped">
              <thead class="thead-light">
                    <tr>
                        <th scope="col">Id</th>
                        <th scope="col">Identificacion</th>
                        <th scope="col">Nombres</th>
                        <th scope="col">Direccion</th>
                        <th scope="col">Numero</th>
                        <th scope="col">Contraseña</th>
                        <th scope="col">Email</th>
                        <th scope="col">Zona</th>
                        <th scope="col">Tipo Usuario</th>
                    </tr>

    </thead>
                    <tr>
                        <th scope="col"><input type="text" id="inputId"></th>
                        <th scope="col"><input type="text" id="inputIdentificacion"></th>
                        <th scope="col"><input type="text" id="inputNombre"></th>
                        <th scope="col"><input type="text" id ="inputDireccion"></th>
                        <th scope="col"><input type="text" id="inputNumero"></th>
                        <th scope="col"><input type="text" id="inputContraseña"></th>
                        <th scope="col"><input type="text" id="inputEmail"></th>
                        <th scope="col"><input type="text" id="inputZona"></th>
                        <th scope="col"><input type="text" id="inputTipoUser"></th>
                    </tr>
   
    </table>
    
</div>    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script>
const url = "http://144.22.56.156:8080/"
const inputIdentificacion = document.getElementById("inputIdentificacion")
const inputId = document.getElementById("inputId")

const inputNombre = document.getElementById("inputNombre")
const inputDireccion = document.getElementById("inputDireccion")
const inputNumero = document.getElementById("inputNumero")
const inputEmail = document.getElementById("inputEmail")
const inputZona = document.getElementById("inputZona")
const inputContraseña = document.getElementById("inputContraseña")

const inputTipoUser = document.getElementById("inputTipoUser")
const btnAñadirUser = document.getElementById("btnAñadirUser")

function funSendDates(){
    let data = {
        id:inputId.value,

        identification: inputIdentificacion.value,
        name: inputNombre.value,
        address:inputDireccion.value,
        cellPhone: inputNumero.value,
        email:  inputEmail.value,
        password: inputContraseña.value,
        zone:inputZona.value,
        type: inputTipoUser.value
    }
     $.ajax({
        method:"POST",
        url:url + "api/user/new" ,
       
        contentType: "application/json; charset=utf-8",
        dataType: 'JSON',
        data: JSON.stringify(data)
    }).done(function(){
        console.log("fue relizado")
        alert("User creado")
    })
    .fail(function(){
        console.log("fallo en el ajax")
    })
}
btnAñadirUser.addEventListener("click",function(){
    if(inputNombre != "" || inputEmail != "" || inputDireccion != "" ||
        inputTipoUser != "" || inputZona != "" || inputNumero != "" || inputIdentificacion != ""){
            funSendDates()
        }else{
            alert("rellene los datos faltantes porfavor")
        }

})
    
    </script>
</body>
</html>